<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visual Novel Demo</title>
    <style>
        <style>
    body {
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        background-color: #f0f0f0;
    }
    #game-container {
        width: 80%;
        max-width: 800px;
        background-color: white;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    #chapter-container {
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 15px;
        text-align: center;
    }
    #location-container {
        font-size: 16px;
        font-weight: normal;
        margin-bottom: 10px;
        color: #666;
    }
    #name-container {
        font-size: 20px;
        font-weight: bold;
        margin-bottom: 10px;
        color: #333;
    }
    #text-container {
        min-height: 150px;
        font-size: 18px;
        line-height: 1.6;
        margin-bottom: 20px;
        border: 1px solid #ccc;
        padding: 15px;
        border-radius: 5px;
        cursor: pointer;
        background-color: #f9f9f9;
    }
</style>
    </style>
</head>
<body>
    <div id="game-container">
        <div id="chapter-container"></div>
        <div id="location-container"></div>
        <div id="name-container"></div>
        <div id="text-container"></div>
    </div>
    <script>
<script>
    const chapterContainer = document.getElementById('chapter-container');
    const locationContainer = document.getElementById('location-container');
    const nameContainer = document.getElementById('name-container');
    const textContainer = document.getElementById('text-container');

    const script = [
        { type: "chapter", text: "Prologue" },
        { type: "location", text: "February 13th, 2045; 12:30 - A weird room" },
        { name: "", text: "A series of pods are organized in different rows and columns. Stairs like the ones that are used in large public libraries are used to reach the pods. At the centre of the colossal structure, we see a glass ceiling." },
        { name: "", text: "My eyes suddenly open as I hear a voice with a peculiar cadence" },
        { name: "A voice", text: "It's not that bad." },
        { name: "A voice", text: "You know what? It is actually quite cute." },
        { name: "A voice", text: "I almost envy you." },
        // Add the rest of your script here
    ];

    let currentLine = 0;
    let isTyping = false;
    let typingSpeed = 30; // milliseconds per character

    let audioContext;

    function initAudio() {
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
    }

    function playTypewriterSound() {
        if (!audioContext) initAudio();

        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();

        oscillator.type = 'square';
        oscillator.frequency.setValueAtTime(440, audioContext.currentTime); // A4 note

        gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.1);

        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);

        oscillator.start();
        oscillator.stop(audioContext.currentTime + 0.1);
    }

    function displayText(text) {
        let index = 0;
        isTyping = true;
        
        function addNextChar() {
            if (index < text.length && isTyping) {
                textContainer.textContent += text[index];
                if (text[index] !== ' ') {
                    playTypewriterSound();
                }
                index++;
                setTimeout(addNextChar, typingSpeed);
            } else {
                isTyping = false;
            }
        }
        
        addNextChar();
    }

    function displayFullText() {
        isTyping = false;
        const currentItem = script[currentLine - 1];
        if (currentItem && currentItem.text) {
            textContainer.textContent = currentItem.text;
        }
    }

    function displayNextLine() {
        if (currentLine < script.length) {
            const currentItem = script[currentLine];
            
            if (currentItem.type === "chapter") {
                chapterContainer.textContent = currentItem.text;
                locationContainer.textContent = "";
                nameContainer.textContent = "";
                textContainer.textContent = "";
            } else if (currentItem.type === "location") {
                locationContainer.textContent = currentItem.text;
                nameContainer.textContent = "";
                textContainer.textContent = "";
            } else {
                nameContainer.textContent = currentItem.name;
                textContainer.textContent = "";
                displayText(currentItem.text);
            }
            
            currentLine++;
        } else {
            chapterContainer.textContent = '';
            locationContainer.textContent = '';
            nameContainer.textContent = '';
            textContainer.textContent = "End of demo. Thank you for playing!";
        }
    }

    textContainer.addEventListener('click', () => {
        if (!audioContext) initAudio();
        if (isTyping) {
            displayFullText();
        } else {
            displayNextLine();
        }
    });

    // Start the game
    displayNextLine();
</script>
    </script>
</body>
</html>
